<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mixed Signal Hardware Design</title>
    <link rel="stylesheet" href="style.css">
    <meta name="description" content="Documenting the journey of designing a mixed-signal PCB focused on creating a USB-powered, single-channel, low-frequency signal analyzer and generator.">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <header id="header">
        <h1>Designing a Mixed Signal Printed Circuit Board - Part 2 (Power)</h1>
        <p>January 8, 2024</p>
    </header>

    <section id="main">
        <h2>Power Supply Design</h2>
        <p>This post details the schematic design of the power supply for our project, which is segmented into three distinct sections: input filtering, an analog Low-Dropout (LDO) regulator, and a digital switching regulator, culminating in a bias generator circuit.</p>

        <h2>Input Filtering and Analog LDO Section</h2>
        <img src="https://raw.githubusercontent.com/moehambouta/Mixed-Signal-PCB/website/assets/ldo_schematic.png" alt="LDO Regulator Schematic">
        <p>The USB power supply is susceptible to high-frequency noise, which can interfere with sensitive electronic components. To mitigate this, we employ a pi filter consisting of two capacitors and an inductor with a DC resistance of 0.15 Ohms. The resistance is crucial for damping to prevent resonance. The inductor's inherent resistance is used to our advantage, negating the need for an additional resistor, thus avoiding unnecessary DC loss.</p>
        <p>The analog LDO's stability is ensured by I/O capacitors specified at a minimum of 10 microfarads as per the HT7533-1 datasheet. Given component tolerances and voltage ratings, we opted for higher capacitance values to guarantee adequate margin. Additionally, the inclusion of resistor R100 forms an LP RC filter with a cutoff around 725 Hz. The final output from this section is a regulated 3.3V analog voltage.</p>

        <h3>Frequency Response Analysis</h3>
        <img src="https://raw.githubusercontent.com/moehambouta/Mixed-Signal-PCB/website/assets/input_filter_simulation.png" alt="Input RLC Filter Frequency Response">
        <p>Using LTSpice for simulation, we analyzed the frequency response of our Low-Pass (LP) RLC filter, revealing a cutoff frequency of approximately 1.5 MHz. This adequately filters out unwanted high-frequency noise from the VBUS input.</p>

        <h2>Switching Regulator Circuit</h2>
        <img src="https://raw.githubusercontent.com/moehambouta/Mixed-Signal-PCB/website/assets/bc_schematic.png" alt="Switching Regulator Schematic">
        <p>The buck converter requires an input capacitor, an output filter comprising an inductor and capacitor, and a feedback network. The inductor value is calculated using the formula: \[L = {{V_{\text{out}} \times (V_{\text{in}} - V_{\text{out}})} \over {\Delta I_L \times f_{sw} \times V_{\text{in}}}}.\] where the target ripple current is a percentage of the maximum operating current. Although the calculation suggests a 12uH inductor, we have selected a 68uH inductor to account for light load conditions. The feedback resistors are chosen to yield an output voltage of approximately 3.327V.</p>

        <h3>Debugging and Validation</h3><br>
        <p>An LED with a series resistor is included for visual confirmation of circuit operation. The resistor value ensures an appropriate current through the LED, adhering to specifications in the datasheet and preventing excessive power consumption.</p>

        <h2>Bias Generator</h2>
        <img src="https://raw.githubusercontent.com/moehambouta/Mixed-Signal-PCB/website/assets/bias_gen.png" alt="Bias Generator Schematic">
        <p>The bias generator employs a voltage divider network to halve the filtered 3.3V analog input, followed by an RC low-pass filter with a 15Hz cutoff frequency, creating a stable reference voltage. An op-amp configured as a voltage follower provides a low impedance output for VCOM, which will serve as a critical reference for ADC and DAC applications.</p>

        <p>
            <span>Next post: </span>
            <a href="mcu.html">Microcontroller</a>
        </p>
    </section>

    <script src="script.js"></script>
</body>
</html>
